/*
CUENCAS is a River Network Oriented GIS
Copyright (C) 2005  Ricardo Mantilla

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
*/


/*
 * TimeSeriesViewer.java
 *
 * Created on June 26, 2003, 10:00 AM
 */

package hydroScalingAPI.modules.analysis_TS.widgets;

/**
 * Creates a panel to visualize the time series associated to a Gauge in the
 * database.  This is a placeholder for a more sofisticated time series analysis
 * module.
 * @author Ricardo Mantilla
 */
public class TimeSeriesViewer extends javax.swing.JDialog {
    
    private hydroScalingAPI.mainGUI.ParentGUI mainFrame;
    
    private hydroScalingAPI.util.plot.XYJPanel p;
    
    /**
     * Creates new form TimeSeriesViewer
     * @param parent The main GIS interface
     * @param oneGauge The {@link hydroScalingAPI.io.MetaGauge} that manages the data
     */
    public TimeSeriesViewer(hydroScalingAPI.mainGUI.ParentGUI parent, hydroScalingAPI.io.MetaGauge oneGauge) {
        super(parent, true);
        mainFrame=parent;
        initComponents();
        pack ();
        
        setBounds(0,0, 600, 350);
        java.awt.Rectangle marcoParent=mainFrame.getBounds();
        java.awt.Rectangle thisMarco=this.getBounds();
        setBounds(marcoParent.x+marcoParent.width/2-thisMarco.width/2,marcoParent.y+marcoParent.height/2-thisMarco.height/2,thisMarco.width,thisMarco.height);
        
        try{
            double [][] data = oneGauge.getTimeAndData();
            p = new hydroScalingAPI.util.plot.XYJPanel(data[0],data[1],oneGauge.toString(),"Years",oneGauge.getLabel(),-9999);
            getContentPane().add(p);
        } catch (java.io.IOException IOE){
            System.err.println("Failed loading data");
            System.err.println(IOE);
        }
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {

        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                closeDialog(evt);
            }
        });

        pack();
    }
    // </editor-fold>//GEN-END:initComponents
    
    /** Closes the dialog */
    private void closeDialog(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_closeDialog
        setVisible(false);
        dispose();
    }//GEN-LAST:event_closeDialog
    
    /**
     * Test for the class
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        hydroScalingAPI.mainGUI.ParentGUI tempFrame=new hydroScalingAPI.mainGUI.ParentGUI();
        new visad.util.Delay(1000);
        java.util.Vector categories=new java.util.Vector();
        java.util.Vector values=new java.util.Vector();
        java.util.Vector conditions=new java.util.Vector();
        
        categories.add("[state]");
        values.add("Arizona");
        conditions.add(new Integer(0));
        categories.add("[type]");
        values.add("Streamflow");
        conditions.add(new Integer(0));
        
        hydroScalingAPI.io.MetaGauge[] queryResult = tempFrame.getGaugesManager().findGauges(categories, values, conditions);
        new TimeSeriesViewer(tempFrame,queryResult[0]).setVisible(true);
    }
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables
    
}
